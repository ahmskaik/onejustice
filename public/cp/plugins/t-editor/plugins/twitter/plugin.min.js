tinymce.PluginManager.requireLangPack('twitter', 'en_EN');
tinymce.PluginManager.add('twitter', function (editor, url) {

    function openmanager() {
        editor.windowManager.open({
            file: url + '/dialog.html?r=' + Math.random(),
            width: 650,
            height: 500,
            inline: 1,
            title: 'Embed Twitter'
        }, {
            plugin_url: url // Plugin absolute URL
        });


    }

    editor.addButton('twitter', {
        text: 'Embed Twitter',
        icon: true,
        image: tinyMCE.baseURL + '/plugins/twitter/img/twitter.png',
        tooltip: 'Add Twitter post',
        onclick: openmanager
    });

    editor.addMenuItem('twitter', {
        icon: 'media',
        text: 'Add Twitter post',
        onclick: openmanager,
        context: 'insert'
    });
});
